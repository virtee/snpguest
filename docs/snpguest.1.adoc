snpguest(1)
===========

NAME
----
snpguest - Command line tool for managing the AMD SEV-SNP Guest environment.


SYNOPSIS
--------
*snpguest* [GLOBAL_OPTIONS] [COMMAND] [COMMAND_ARGS] [SUBCOMMAND] [SUBCOMMAND_ARGS]
*snpguest* [_-h, --help_]


DESCRIPTION
-----------
snpguest is a CLI utility for navigating and interacting with the AMD SEV-SNP
guest firmware device of a guest system.


GLOBAL OPTIONS
--------------
*-q, --quiet*:: Don't print any output to the console.


COMMANDS
--------
*snpguest report*::
    usage: snpguest report --extended --random [-m, --message-version] $MESSAGE_VERSION [-v, --vmpl] $VMPL --request $REQUEST_FILE [-a, --att-report] $ATTESTATION_REPORT_PATH [-c, --certs] $CERTS_PATH
    
    Requests an attestation report from the host. Will write the contents of the attestation report in binary format into the specified report path.
    If no path is provided for the attestation report, the path will default to current directory ("./attestation_report.bin").
    User can pass 64 bytes of data in any file format into request in order to use that data to request the attestation report.
    The user can use the --random flag to generate a request-file with randomly generated 64 byts. If the user provides a request path and uses the --random flag, the data will be written into the provided file path.
    If the user uses the --random flag, but does not provide a request path, then the data will be written into the default file in current directory ("./random-request-file.txt").
    Message-version and VMPL are both optional paramaters, they will default to 1.
    If the --extended flag is raised, then an extended report be requested.
    The certificates will be cycled through and placed into the specified directory.
    If no certs path is provided, the directory will default to "./certs".
    The certs will be stored in the same format as they were loaded on by host (".pem" or ".der").

    options:
    -h, --help  show a help message
    -e, --extended  request an extended report
    -r, --random  generate 64 random bytes of data to pass for the report request

*snpguest fetch ca*::
    usage: snpguest fetch ca [-p,--processor] $PROCESSOR_TYPE [-c, --certs] $CERTS_PATH

    Requests the certificate authority chain (ARK & ASK) from the KDS.
    The user must specify their host processor type using the --processor flag.
    The certificates will be written into the provided directory.
    Cert directory defaults to "./certs".
    Both certificates will be written in .pem formats.

    options:
    -h, --help show a help message

*snpguest fetch vcek*::
    usage: snpguest fetch vcek [-p, --processor] $PROCESSOR_TYPE [-c, --certs] $CERTS_PATH  [-a, --att-report] $ATTESTATION_REPORT_PATH

    Requests the VCEK certificate from the KDS.
    The user must specify their host processor type using the processor flag.
    The user needs to provide the path to an existing attestation report in order to request the VCEK.
    If no path is provided for the attestation report, the program will look for an attestation report in the local directory by default ("./attestation_report.bin").
    The certificate will be written into the provided directory.
    Cert directory defaults to "./certs". 
    The VCEK will be written in .der format.

    options:
    -h, --help show a help message

*snpguest guest verify certificate-chain*::
    usage: snpguest verify certificate-chain [-c, --certs] $CERTS_PATH

    Verifies that the provided certificate chain has been properly signed by each certificate.
    The user needs to provide a directory were all 3 of the certificates are stored (ARK,ASK and VCEK).
    If no path is provided for the certificates, the program will look for them in the local cert directory ("./certs")
    Error will be raised if any of the certificates fails verification.

    options:
    -h, --help show a help message

*snpguest verify tcb*::
    usage: snpguest verify tcb [-c, --certs] $CERTS_PATH [-a, --att-report] $ATTESTATION_REPORT_PATH

    Verifies the trusted compute base using the provided attestation report and VCEK certificate
    The user needs to provide a path to the attestation report and to the directory where the VCEK certificate is stored.
    If no path is provided for the attestation report, the program will look for it in the local directory ("./attestation_report.bin").
    If no path is provided for the certificate, the program will look for it in the local cert directory ("./certs").
    Error will be raised if there is any mismatch between the report TCB and the VCEK TCB contents.

    options:
    -h, --help show a help message

*snpguest verify attestation-signature*::
    usage: snpguest verify attestation-signature [-c, --certs] $CERTS_PATH [-a, --att-report] $ATTESTATION_REPORT_PATH

    Verifies that the provided attestation report was signed by the VCEK.
    The user needs to provide a path to the attestation report and to the VCEK certificate.
    If no path is provided for the attestation report, the program will look for it in the local directory ("./attestation_report.bin").
    If no path is provided for the certificate, the program will look for it in the local cert directory ("./certs").
    Error will be raised if the signature in the attestation report does not match the VCEK public key.

    options:
    -h, --help show a help message

*snpguest guest display report*::
    usage: snpguest display report [-a, --att-report] $ATTESTATION_REPORT_PATH

    Prints attestation report into terminal.
    The user needs to provide a path to the attestation report they would like to display.
    If no path is provided for the attestation-report, the program will look for them in the local directory ("./attestation_report.bin)

    options:
    -h, --help show a help message

REPORTING BUGS
--------------

Please report all bugs to <https://github.com/virtee/snpguest/issues>
